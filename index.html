<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="theme-color" content="#0b1220"/>
  <meta name="color-scheme" content="dark light"/>
  <title>ViralVault Store — Melhore sua conta Roblox em minutos</title>
  <meta name="description" content="ViralVault Store: catálogo dinâmico, checkout PIX, verificação por Order ID e suporte via Discord. Experiência rápida, bonita e segura."/>
  <meta property="og:title" content="ViralVault Store"/>
  <meta property="og:description" content="Melhore sua conta Roblox em minutos. Checkout PIX • Verificação Order ID • Anti-golpe • Suporte Discord."/>
  <meta property="og:type" content="website"/>
  <meta name="robots" content="index,follow"/>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'%3E%3Cdefs%3E%3CradialGradient id='g' cx='30%25' cy='25%25' r='80%25'%3E%3Cstop offset='0%25' stop-color='%23ffffff'/%3E%3Cstop offset='55%25' stop-color='%237bd1ff'/%3E%3Cstop offset='100%25' stop-color='%230a0f1c'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect x='6' y='6' width='52' height='52' rx='14' fill='url(%23g)'/%3E%3Cpath d='M21 22h9l6 20h-6l-1.3-5H23.7L22.4 42H16l5-20zm4 11h4l-2-7-2 7z' fill='%230a0f1c' opacity='.92'/%3E%3Ccircle cx='44.5' cy='24.5' r='5.5' fill='%230a0f1c' opacity='.92'/%3E%3Cpath d='M42.5 24.5l2 2.2 4-4.4' fill='none' stroke='%237bd1ff' stroke-width='2.4' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E">
  <link rel="manifest" href="data:application/manifest+json,%7B%22name%22%3A%22ViralVault%20Store%22,%22short_name%22%3A%22ViralVault%22,%22start_url%22%3A%22.%2F%22,%22display%22%3A%22standalone%22,%22background_color%22%3A%22%230b1220%22,%22theme_color%22%3A%22%230b1220%22,%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%253Csvg%2520xmlns%253D'http%253A%252F%252Fwww.w3.org%252F2000%252Fsvg'%2520width%253D'512'%2520height%253D'512'%2520viewBox%253D'0%25200%2520512%2520512'%253E%253Cdefs%253E%253CradialGradient%2520id%253D'g'%2520cx%253D'30%2525'%2520cy%253D'25%2525'%2520r%253D'80%2525'%253E%253Cstop%2520offset%253D'0%2525'%2520stop-color%253D'%2523ffffff'%252F%253E%253Cstop%2520offset%253D'55%2525'%2520stop-color%253D'%25237bd1ff'%252F%253E%253Cstop%2520offset%253D'100%2525'%2520stop-color%253D'%25230a0f1c'%252F%253E%253C%252FradialGradient%253E%253C%252Fdefs%253E%253Crect%2520x%253D'48'%2520y%253D'48'%2520width%253D'416'%2520height%253D'416'%2520rx%253D'112'%2520fill%253D'url(%2523g)'%252F%253E%253Cpath%2520d%253D'M165%2520176h92l58%2520191h-64l-12-44H196l-12%252044h-64l45-191zm46%2520107h34l-17-56-17%252056z'%2520fill%253D'%25230a0f1c'%2520opacity%253D'.92'%252F%253E%253Ccircle%2520cx%253D'355'%2520cy%253D'205'%2520r%253D'44'%2520fill%253D'%25230a0f1c'%2520opacity%253D'.92'%252F%253E%253Cpath%2520d%253D'M340%2520205l18%252020%252038-42'%2520fill%253D'none'%2520stroke%253D'%25237bd1ff'%2520stroke-width%253D'18'%2520stroke-linecap%253D'round'%2520stroke-linejoin%253D'round'%252F%253E%253C%252Fsvg%253E%22,%22sizes%22%3A%22512x512%22,%22type%22%3A%22image%2Fsvg%2Bxml%22,%22purpose%22%3A%22any%20maskable%22%7D%5D%7D"/>
  <style>
    :root{
      --bg0:#050814;
      --bg1:#0b1220;
      --bg2:#0f1a33;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.085);
      --stroke:rgba(255,255,255,.12);
      --stroke2:rgba(123,209,255,.22);
      --txt:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.46);
      --blue:#7bd1ff;
      --blue2:#2aa8ff;
      --indigo:#6f7cff;
      --ok:#28e07c;
      --warn:#ffd36b;
      --bad:#ff6b8b;

      --r16:16px; --r20:20px; --r24:24px; --r28:28px;
      --shadow: 0 20px 80px rgba(0,0,0,.42);
      --shadow2: 0 10px 30px rgba(0,0,0,.35);
      --max: 1120px;

      --ease: cubic-bezier(.2,.8,.2,1);
      --fast: 180ms var(--ease);
      --med: 420ms var(--ease);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--txt);
      background: radial-gradient(1100px 700px at 20% 10%, rgba(123,209,255,.20), transparent 60%),
                  radial-gradient(900px 600px at 90% 25%, rgba(111,124,255,.18), transparent 55%),
                  radial-gradient(800px 600px at 40% 90%, rgba(42,168,255,.14), transparent 55%),
                  linear-gradient(180deg, var(--bg0), var(--bg1) 50%, var(--bg0));
      overflow-x:hidden;
    }

    /* Da Vinci-ish subtle “sketch” overlay */
    .sketch{
      position:fixed; inset:0; pointer-events:none; opacity:.22; mix-blend-mode:overlay;
      background-image:
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='900' height='700' viewBox='0 0 900 700'%3E%3Cg fill='none' stroke='%23ffffff' stroke-opacity='.18' stroke-width='1'%3E%3Cpath d='M40 80 C180 30, 260 150, 420 90 S710 60, 860 140'/%3E%3Cpath d='M60 620 C180 520, 340 690, 520 560 S720 460, 850 600'/%3E%3Cpath d='M130 280 C220 220, 290 330, 400 270 S560 210, 710 300'/%3E%3Cpath d='M110 420 C260 350, 330 500, 470 410 S650 340, 820 450'/%3E%3Cpath d='M460 40 v620'/%3E%3Cpath d='M40 350 h820'/%3E%3Ccircle cx='460' cy='350' r='190'/%3E%3Ccircle cx='460' cy='350' r='320'/%3E%3C/g%3E%3C/svg%3E");
      background-size: 900px 700px;
      background-repeat: repeat;
      filter: blur(.2px);
    }

    .wrap{max-width:var(--max); margin:0 auto; padding:18px 16px 96px;}
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(140%) blur(10px);
      background: linear-gradient(180deg, rgba(7,11,24,.72), rgba(7,11,24,.35));
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .topbar .row{
      max-width:var(--max); margin:0 auto; padding:14px 16px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{display:flex; align-items:center; gap:10px; min-width: 180px;}
    .logo{
      width:42px; height:42px; border-radius:14px;
      background: radial-gradient(120% 120% at 30% 20%, #fff 0%, var(--blue) 55%, #081021 100%);
      box-shadow: 0 12px 40px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.22);
      display:grid; place-items:center;
      flex:0 0 auto;
    }
    .logo svg{width:26px; height:26px; filter: drop-shadow(0 8px 14px rgba(0,0,0,.35));}
    .brand b{font-size:14px; letter-spacing:.2px;}
    .brand span{display:block; color:var(--muted2); font-size:12px; margin-top:1px;}

    .chipbar{display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end;}
    .pill{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      border-radius:999px;
      padding:10px 12px;
      display:flex; gap:10px; align-items:center;
      box-shadow: inset 0 0 0 1px rgba(123,209,255,.08);
      transition: transform var(--fast), background var(--fast), border-color var(--fast);
      user-select:none;
    }
    .pill:active{transform: scale(.98);}
    .pill strong{font-size:12px;}
    .pill small{color:var(--muted); font-size:12px;}
    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.07);
      color:var(--txt);
      padding:10px 14px;
      border-radius:14px;
      cursor:pointer;
      transition: transform var(--fast), box-shadow var(--fast), background var(--fast), border-color var(--fast);
      box-shadow: var(--shadow2);
      position:relative;
      overflow:hidden;
      -webkit-tap-highlight-color: transparent;
    }
    .btn.primary{
      background: linear-gradient(135deg, rgba(123,209,255,.92), rgba(111,124,255,.85));
      color: #081021;
      border-color: rgba(255,255,255,.24);
      box-shadow: 0 18px 60px rgba(123,209,255,.18), 0 18px 60px rgba(111,124,255,.10);
      font-weight:700;
    }
    .btn.ghost{
      background: rgba(255,255,255,.06);
    }
    .btn:before{
      content:"";
      position:absolute; inset:-60% -40%;
      background: radial-gradient(closest-side, rgba(255,255,255,.28), transparent 55%);
      transform: translateX(-30%) translateY(-10%) rotate(15deg);
      opacity:0; transition: opacity var(--fast), transform var(--med);
    }
    .btn:hover:before{opacity:.9; transform: translateX(0) translateY(0) rotate(0deg);}
    .btn:hover{border-color: rgba(123,209,255,.26);}
    .btn:active{transform: scale(.985);}
    .btn:focus{outline: none;}
    .btn:focus-visible{box-shadow: 0 0 0 3px rgba(123,209,255,.26), var(--shadow2);}

    /* Endless micro-animation (gentle) */
    @keyframes floaty { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-3px)}}
    @keyframes sheen { 0%{transform:translateX(-120%) rotate(15deg)} 100%{transform:translateX(120%) rotate(15deg)}}
    .endless{ animation: floaty 2.2s var(--ease) infinite; }
    .endless::after{
      content:"";
      position:absolute; inset:-40% -30%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.28), transparent);
      transform: translateX(-120%) rotate(15deg);
      opacity:.55;
      animation: sheen 2.9s linear infinite;
      pointer-events:none;
    }

    .hero{
      margin-top:18px;
      display:grid;
      grid-template-columns: 1.25fr .9fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr; }
      .brand{min-width:auto}
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.045));
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--r28);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(700px 280px at 15% 0%, rgba(123,209,255,.22), transparent 60%),
                  radial-gradient(700px 280px at 85% 10%, rgba(111,124,255,.18), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .card > *{position:relative; z-index:1;}
    .heroLeft{padding:22px 18px 18px;}
    .badgeRow{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:14px;}
    .badge{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: inset 0 0 0 1px rgba(123,209,255,.12);
      color: rgba(255,255,255,.90);
      font-size:12px;
    }
    .dot{width:10px; height:10px; border-radius:99px; background: var(--ok); box-shadow: 0 0 0 6px rgba(40,224,124,.12);}
    h1{
      margin:10px 0 8px;
      font-size: clamp(34px, 5vw, 52px);
      line-height: 1.02;
      letter-spacing: -.8px;
    }
    .sub{
      color: var(--muted);
      font-size: 15px;
      line-height: 1.5;
      max-width: 62ch;
    }
    .ctaRow{
      margin-top:16px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .metaRow{
      margin-top:14px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .tag{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.055);
      color: rgba(255,255,255,.78);
      font-size:12px;
      display:flex; align-items:center; gap:10px;
    }
    .tag b{color:rgba(255,255,255,.92)}
    .heroRight{padding:16px; display:flex; flex-direction:column; gap:12px;}
    .miniPanel{
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      padding:14px;
      box-shadow: inset 0 0 0 1px rgba(123,209,255,.08);
    }
    .miniPanel h3{margin:0 0 10px; font-size:14px; letter-spacing:.2px;}
    .miniPanel .small{color:var(--muted2); font-size:12px; line-height:1.35}
    .progress{
      margin-top:10px;
      height:10px; border-radius:99px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .progress > i{
      display:block; height:100%; width: 40%;
      background: linear-gradient(90deg, rgba(123,209,255,.95), rgba(111,124,255,.90));
      border-radius:99px;
      box-shadow: 0 0 0 1px rgba(255,255,255,.16) inset;
      animation: prog 2.7s var(--ease) infinite;
    }
    @keyframes prog{0%{transform:translateX(-20%)} 50%{transform:translateX(80%)} 100%{transform:translateX(-20%)}}

    /* Sections */
    .section{margin-top:16px;}
    .grid{
      display:grid; grid-template-columns: 1.05fr .95fr; gap:16px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns:1fr;} }
    .pane{
      border-radius: var(--r28);
      border: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.045));
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
    }
    .pane::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(600px 220px at 25% 0%, rgba(42,168,255,.15), transparent 60%),
                  radial-gradient(600px 220px at 80% 20%, rgba(111,124,255,.14), transparent 60%);
      pointer-events:none;
      opacity:.95;
    }
    .pane > *{position:relative; z-index:1;}
    .paneHead{padding:16px 16px 10px; display:flex; align-items:center; justify-content:space-between; gap:10px;}
    .paneHead h2{margin:0; font-size:14px; letter-spacing:.2px;}
    .paneHead .hint{color:var(--muted2); font-size:12px;}
    .paneBody{padding: 0 16px 16px;}
    .input{
      width:100%;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.22);
      color: rgba(255,255,255,.92);
      padding: 12px 12px;
      outline:none;
      transition: border-color var(--fast), box-shadow var(--fast);
    }
    .input:focus{border-color: rgba(123,209,255,.28); box-shadow: 0 0 0 3px rgba(123,209,255,.16);}
    .row2{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}
    .row2 .input{flex:1 1 220px;}
    .muted{color:var(--muted2); font-size:12px;}
    .hr{height:1px; background: rgba(255,255,255,.08); margin:12px 0;}
    .list{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 520px){ .list{grid-template-columns:1fr;} }
    .item{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      padding: 12px;
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
      transition: transform var(--fast), border-color var(--fast), background var(--fast);
    }
    .item:hover{transform: translateY(-1px); border-color: rgba(123,209,255,.18); background: rgba(0,0,0,.20);}
    .item b{font-size:13px;}
    .item small{display:block; color:var(--muted2); margin-top:2px;}
    .qty{
      display:flex; align-items:center; gap:8px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      padding:6px 8px; border-radius: 999px;
    }
    .iconBtn{
      width:30px; height:30px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      cursor:pointer;
      display:grid; place-items:center;
      transition: transform var(--fast), border-color var(--fast), background var(--fast);
      -webkit-tap-highlight-color: transparent;
    }
    .iconBtn:active{transform: scale(.97);}
    .iconBtn:hover{border-color: rgba(123,209,255,.22); background: rgba(255,255,255,.08);}
    .sum{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(0,0,0,.14);
      border:1px solid rgba(255,255,255,.10);
    }
    .sum b{font-size:14px}
    .sum span{color: var(--muted); font-size:12px}
    .note{
      padding: 12px;
      border-radius: 18px;
      border:1px dashed rgba(123,209,255,.30);
      background: rgba(123,209,255,.08);
      color: rgba(255,255,255,.82);
      font-size: 12px;
      line-height: 1.35;
    }

    /* Bottom nav */
    .bottomNav{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 14px;
      z-index: 60;
      width: min(960px, calc(100vw - 18px));
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(7,11,24,.62);
      backdrop-filter: blur(12px) saturate(140%);
      box-shadow: 0 24px 80px rgba(0,0,0,.55);
      padding: 10px;
      display:flex; gap:8px; align-items:center; justify-content:space-between;
    }
    .navBtn{
      flex: 1 1 auto;
      border-radius: 20px;
      border:1px solid transparent;
      background: transparent;
      color: rgba(255,255,255,.78);
      padding: 10px 10px;
      display:flex; gap:10px; align-items:center; justify-content:center;
      cursor:pointer;
      transition: background var(--fast), border-color var(--fast), transform var(--fast), color var(--fast);
      -webkit-tap-highlight-color: transparent;
      white-space:nowrap;
      font-size: 13px;
    }
    .navBtn.active{
      background: rgba(255,255,255,.08);
      border-color: rgba(123,209,255,.18);
      color: rgba(255,255,255,.92);
      box-shadow: inset 0 0 0 1px rgba(123,209,255,.12);
    }
    .navBtn:active{transform: scale(.985);}
    .navBtn svg{width:18px; height:18px; opacity:.95}
    @media (max-width: 520px){
      .navBtn span{display:none}
      .navBtn{padding: 12px 8px;}
    }

    /* Modal */
    .scrim{
      position: fixed; inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
      display:none;
      z-index: 80;
    }
    .modal{
      position: fixed;
      left: 50%; top: 50%;
      transform: translate(-50%, -50%);
      width: min(900px, calc(100vw - 18px));
      max-height: min(82vh, 740px);
      overflow:auto;
      border-radius: 28px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(8,12,26,.88);
      backdrop-filter: blur(12px) saturate(140%);
      box-shadow: 0 30px 120px rgba(0,0,0,.62);
      display:none;
      z-index: 90;
    }
    .modalHead{
      position: sticky; top:0;
      padding: 14px 14px;
      background: linear-gradient(180deg, rgba(8,12,26,.92), rgba(8,12,26,.65));
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .modalHead h3{margin:0; font-size:14px;}
    .modalBody{padding: 14px;}
    .closeX{
      width:38px; height:38px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      cursor:pointer;
      display:grid; place-items:center;
      transition: transform var(--fast), border-color var(--fast), background var(--fast);
    }
    .closeX:active{transform: scale(.98);}

    /* Settings switches */
    .setGrid{display:grid; grid-template-columns: 1fr 1fr; gap:10px;}
    @media (max-width: 720px){ .setGrid{grid-template-columns:1fr;} }
    .setCard{
      padding:12px;
      border-radius: 20px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
    }
    .setCard b{display:block; font-size:13px; margin-bottom:4px;}
    .setCard small{display:block; color:var(--muted2); line-height:1.35}
    .switch{
      margin-top:10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .toggle{
      width: 48px; height: 28px;
      border-radius: 999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      position:relative;
      cursor:pointer;
      transition: background var(--fast), border-color var(--fast);
      flex: 0 0 auto;
    }
    .toggle i{
      position:absolute; top:50%; left: 3px;
      transform: translateY(-50%);
      width: 22px; height:22px;
      border-radius: 999px;
      background: rgba(255,255,255,.86);
      box-shadow: 0 8px 22px rgba(0,0,0,.45);
      transition: left var(--fast), background var(--fast);
    }
    .toggle.on{
      background: rgba(123,209,255,.22);
      border-color: rgba(123,209,255,.28);
    }
    .toggle.on i{left: 23px; background: #ffffff;}

    .kpiRow{display:flex; gap:10px; flex-wrap:wrap;}
    .kpi{
      padding:10px 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      min-width: 190px;
      flex: 1 1 190px;
    }
    .kpi b{font-size:12px; display:block;}
    .kpi span{color:var(--muted); font-size:12px;}
    .kpi i{display:block; font-style:normal; margin-top:6px; font-size:14px; color: rgba(255,255,255,.92);}

    /* AI Support floating button */
    .fab{
      position: fixed;
      right: 14px;
      bottom: 92px;
      z-index: 70;
      display:flex; gap:10px; align-items:center;
    }
    .fab .bubble{
      padding: 10px 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(7,11,24,.70);
      backdrop-filter: blur(10px) saturate(140%);
      color: rgba(255,255,255,.80);
      font-size: 12px;
      display:none;
    }
    .fab button{
      width:56px; height:56px;
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.12);
      background: radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.55), rgba(123,209,255,.28) 55%, rgba(0,0,0,.20) 100%);
      box-shadow: 0 22px 70px rgba(0,0,0,.55), inset 0 0 0 1px rgba(123,209,255,.20);
      cursor:pointer;
      display:grid; place-items:center;
      transition: transform var(--fast);
      -webkit-tap-highlight-color: transparent;
      position:relative;
      overflow:hidden;
    }
    .fab button:active{transform: scale(.98);}
    .fab button::after{
      content:"";
      position:absolute; inset:-50% -40%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      transform: translateX(-120%) rotate(18deg);
      opacity:.65;
      animation: sheen 2.6s linear infinite;
      pointer-events:none;
    }
    .fab svg{width:26px; height:26px; color:#081021;}

    /* Performance modes */
    .lite body{}
    .lite .sketch{opacity:.14}
    .lite .card, .lite .pane{box-shadow: 0 10px 34px rgba(0,0,0,.32)}
    .lite .btn.primary{box-shadow: 0 14px 36px rgba(123,209,255,.12), 0 14px 36px rgba(111,124,255,.08)}
    .reduce-motion *{animation: none !important; transition:none !important; scroll-behavior:auto !important;}
    .reduce-motion .btn:before, .reduce-motion .btn:after, .reduce-motion .fab button::after{display:none !important;}

    /* Accessibility */
    .sr{position:absolute; left:-9999px; width:1px; height:1px; overflow:hidden;}
  </style>
</head>
<body>
  <div class="sketch" aria-hidden="true"></div>

  <header class="topbar" role="banner">
    <div class="row">
      <div class="brand" aria-label="ViralVault Store">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 18h10l7 28h-7l-1.4-6h-8.8L18.4 46H12l8-28zm3 16h5l-2.5-9-2.5 9z" fill="#081021" opacity=".92"/>
            <circle cx="46" cy="22" r="6" fill="#081021" opacity=".92"/>
            <path d="M43.2 22l2.1 2.3 4.2-4.8" stroke="#7bd1ff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
        <div>
          <b>ViralVault Store</b>
          <span id="statusLine">Sistema online • pronto</span>
        </div>
      </div>

      <div class="chipbar">
        <button class="pill" id="langBtn" title="Idioma" type="button">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" opacity=".9"/><path d="M2 12h20" stroke="currentColor" opacity=".7"/><path d="M12 2c3 3 3 17 0 20" stroke="currentColor" opacity=".7"/><path d="M12 2c-3 3-3 17 0 20" stroke="currentColor" opacity=".7"/></svg>
          <strong id="langLabel">PT-BR</strong>
          <small>▼</small>
        </button>
        <button class="btn ghost endless" id="discordBtn" type="button">Discord</button>
        <button class="btn" id="settingsBtn" type="button" aria-haspopup="dialog" aria-controls="settingsModal">⚙️</button>
      </div>
    </div>
  </header>

  <main class="wrap" role="main">
    <section class="hero" aria-label="ViralVault hero">
      <div class="card heroLeft">
        <div class="badgeRow">
          <span class="badge"><span class="dot"></span> Checkout PIX • Verificação Order ID • Anti-golpe</span>
          <span class="badge" style="border-style:dashed; border-color: rgba(123,209,255,.28); background: rgba(123,209,255,.06);">UX “Da Vinci” • Vibrações • Microinterações</span>
        </div>

        <h1 id="heroTitle">Melhore sua conta Roblox em minutos!</h1>
        <p class="sub" id="heroSub">
          Catálogo dinâmico com carrinho local, checkout PIX e verificação por Order ID. Fluxo rápido, sem confusão. Suporte via Discord + IA (opcional).
        </p>

        <div class="ctaRow">
          <button class="btn primary endless" id="goCatalog" type="button">Ver catálogo</button>
          <button class="btn ghost endless" id="goCheckout" type="button">Ir pro checkout</button>
          <button class="btn ghost" id="goOrder" type="button">Ver pedido</button>
        </div>

        <div class="metaRow">
          <span class="tag"><b>Worker</b> <span id="workerBadge" style="color:var(--ok)">ok</span></span>
          <span class="tag"><b>Cache</b> <span id="cacheBadge">local</span></span>
          <span class="tag"><b>Modo</b> <span id="pwaBadge">PWA</span></span>
          <span class="tag"><b>FPS</b> <span id="fpsBadge">—</span></span>
        </div>
      </div>

      <aside class="card heroRight" aria-label="Painel">
        <div class="miniPanel">
          <h3>Painel</h3>
          <div class="small">Catálogo</div>
          <div class="progress" aria-hidden="true"><i></i></div>

          <div class="hr"></div>
          <div class="row2" style="justify-content:space-between">
            <div class="small">Carrinho</div>
            <div class="small"><b id="cartCount">0</b> itens</div>
          </div>
          <div class="progress" aria-hidden="true" style="height:8px"><i style="width:18%; animation-duration:3.4s"></i></div>

          <div class="hr"></div>
          <div class="small">Último pedido</div>
          <div class="small" id="lastOrder">—</div>
          <p class="small" style="margin-top:10px;color:var(--muted)">
            Dica: finalize o pedido e guarde seu <b>Order ID</b> para acompanhar.
          </p>
        </div>

        <div class="miniPanel">
          <h3>Ações rápidas</h3>
          <div class="row2">
            <button class="btn" id="reloadCatalog" type="button">Recarregar catálogo</button>
            <button class="btn" id="resetLocal" type="button">Reset local</button>
            <button class="btn" id="perfTest" type="button">Teste anti‑lag</button>
          </div>
          <div class="small" id="perfResult" style="margin-top:10px;color:var(--muted2)">
            • Otimização automática: carga pesada inicia quando o navegador está “ocioso”.
          </div>
        </div>
      </aside>
    </section>

    <section class="section grid" aria-label="Conteúdo">
      <!-- Catalog -->
      <div class="pane" id="viewCatalog">
        <div class="paneHead">
          <h2>Catálogo</h2>
          <div class="hint">Busque, selecione quantidades e adicione ao carrinho</div>
        </div>
        <div class="paneBody">
          <div class="row2">
            <input class="input" id="search" placeholder="Buscar produto... (ex: brainrot, gift, robux)" autocomplete="off"/>
            <button class="btn" id="openCart" type="button">Ver carrinho</button>
            <button class="btn primary" id="quickCheckout" type="button">Ir pro checkout</button>
          </div>

          <div class="hr"></div>

          <div class="list" id="productList" aria-live="polite"></div>

          <div class="hr"></div>

          <div class="note">
            Segurança: nunca peça senha. Entrega e validações são feitas por Order ID.
            Se alguém pedir dados fora do fluxo, trate como golpe e use o Discord oficial.
          </div>
        </div>
      </div>

      <!-- Checkout -->
      <div class="pane" id="viewCheckout">
        <div class="paneHead">
          <h2>Checkout (PIX)</h2>
          <div class="hint">Gere seu Order ID e cole o PIX</div>
        </div>
        <div class="paneBody">
          <div class="sum">
            <div>
              <b>Total</b>
              <span id="totalHint">Itens do carrinho</span>
            </div>
            <div style="text-align:right">
              <b id="totalPrice">R$ 0,00</b><br/>
              <span id="totalItems" class="muted">0 itens</span>
            </div>
          </div>

          <div class="hr"></div>

          <div class="row2">
            <input class="input" id="robloxUser" placeholder="Seu usuário Roblox (opcional)" autocomplete="off"/>
            <button class="btn" id="genOrder" type="button">Gerar Order ID</button>
            <button class="btn" id="copyOrder" type="button">Copiar</button>
          </div>
          <p class="muted" style="margin:8px 0 0">Order ID: <b id="orderId">—</b></p>

          <div class="hr"></div>

          <label class="muted">PIX Copia e Cola</label>
          <textarea class="input" id="pix" rows="4" placeholder="Cole aqui o PIX Copia e Cola..." style="resize:vertical"></textarea>
          <div class="row2" style="margin-top:10px">
            <button class="btn primary endless" id="confirmPaid" type="button">Já paguei</button>
            <button class="btn" id="copyPix" type="button">Copiar PIX</button>
          </div>

          <div class="hr"></div>

          <div class="note" id="checkoutNote">
            Depois do pagamento, vá em <b>Pedido</b> e use seu Order ID para acompanhar.
            Suporte oficial: Discord.
          </div>
        </div>
      </div>

      <!-- Order -->
      <div class="pane" id="viewOrder">
        <div class="paneHead">
          <h2>Pedido</h2>
          <div class="hint">Acompanhe seu status usando o Order ID</div>
        </div>
        <div class="paneBody">
          <div class="row2">
            <input class="input" id="orderLookup" placeholder="Cole o Order ID aqui..." autocomplete="off"/>
            <button class="btn primary" id="checkOrder" type="button">Verificar</button>
            <button class="btn" id="discordHelp" type="button">Abrir Discord</button>
          </div>

          <div class="hr"></div>

          <div class="setCard">
            <b>Status</b>
            <small id="orderStatus">—</small>
            <div class="hr"></div>
            <div class="kpiRow">
              <div class="kpi"><b>Integridade</b><span>Anti-golpe</span><i id="kpiIntegrity">Ativo</i></div>
              <div class="kpi"><b>Tempo estimado</b><span>depende do produto</span><i id="kpiEta">—</i></div>
              <div class="kpi"><b>Canal</b><span>Suporte</span><i id="kpiSupport">Discord</i></div>
            </div>
          </div>

          <div class="hr"></div>

          <div class="note">
            Se o pedido não atualizar: espere alguns minutos e tente novamente. Se persistir, abra ticket no Discord com seu Order ID.
          </div>
        </div>
      </div>

      <!-- FAQ -->
      <div class="pane" id="viewFaq">
        <div class="paneHead">
          <h2>FAQ</h2>
          <div class="hint">Respostas rápidas</div>
        </div>
        <div class="paneBody" id="faqBody"></div>
      </div>
    </section>
  </main>

  <!-- Floating AI -->
  <div class="fab" aria-label="Assistente">
    <div class="bubble" id="fabBubble">Posso ajudar?</div>
    <button id="aiBtn" type="button" title="Assistente IA (opcional)">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M7 18c-1.7 0-3-1.3-3-3V9c0-1.7 1.3-3 3-3h10c1.7 0 3 1.3 3 3v6c0 1.7-1.3 3-3 3H12l-4 3v-3H7Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
        <path d="M8.6 10.8h6.8M8.6 13.6h4.6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <span class="sr">Abrir assistente</span>
    </button>
  </div>

  <!-- Bottom Nav -->
  <nav class="bottomNav" aria-label="Navegação">
    <button class="navBtn active" data-go="catalog" type="button" id="navCatalog">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 7h12l-1 13H7L6 7Z" stroke="currentColor" stroke-width="2"/><path d="M9 7V5a3 3 0 0 1 6 0v2" stroke="currentColor" stroke-width="2"/></svg>
      <span>Catálogo</span>
    </button>
    <button class="navBtn" data-go="checkout" type="button" id="navCheckout">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 4h10v16H7V4Z" stroke="currentColor" stroke-width="2"/><path d="M9 8h6M9 12h6M9 16h4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      <span>Checkout</span>
    </button>
    <button class="navBtn" data-go="order" type="button" id="navOrder">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 3h10v18l-5-3-5 3V3Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg>
      <span>Pedido</span>
    </button>
    <button class="navBtn" data-go="faq" type="button" id="navFaq">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 18h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M9.5 9.5a2.5 2.5 0 1 1 3.7 2.2c-.9.5-1.2 1-1.2 1.8v.4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      <span>FAQ</span>
    </button>
  </nav>

  <!-- Settings modal -->
  <div class="scrim" id="scrim"></div>
  <section class="modal" id="settingsModal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <div class="modalHead">
      <h3 id="settingsTitle">Configurações</h3>
      <button class="closeX" id="closeSettings" type="button" aria-label="Fechar">✕</button>
    </div>
    <div class="modalBody">
      <div class="setGrid">
        <div class="setCard">
          <b>Modo Desempenho (Lite)</b>
          <small>Reduz sombras/efeitos e prioriza fluidez em celulares fracos.</small>
          <div class="switch">
            <span class="muted">Recomendado se estiver “lagando”.</span>
            <div class="toggle" data-key="lite" id="togLite" role="switch" aria-checked="false"><i></i></div>
          </div>
        </div>
        <div class="setCard">
          <b>Reduzir Animações</b>
          <small>Desliga animações/transições (também respeita “reduzir movimento” do sistema).</small>
          <div class="switch">
            <span class="muted">Economiza bateria.</span>
            <div class="toggle" data-key="reduceMotion" id="togMotion" role="switch" aria-checked="false"><i></i></div>
          </div>
        </div>
        <div class="setCard">
          <b>Sons de clique</b>
          <small>Feedback sonoro sutil (gera localmente, sem baixar nada).</small>
          <div class="switch">
            <span class="muted">Desligue se preferir.</span>
            <div class="toggle on" data-key="sound" id="togSound" role="switch" aria-checked="true"><i></i></div>
          </div>
        </div>
        <div class="setCard">
          <b>Vibração</b>
          <small>Vibrações curtas em botões (quando suportado).</small>
          <div class="switch">
            <span class="muted">Ajuda no “feel”.</span>
            <div class="toggle on" data-key="haptics" id="togHaptics" role="switch" aria-checked="true"><i></i></div>
          </div>
        </div>
        <div class="setCard">
          <b>Assistente IA</b>
          <small>Se você tiver Worker IA, pode plugar aqui (sem custo extra no site).</small>
          <div class="switch">
            <span class="muted">Fallback: Discord.</span>
            <div class="toggle on" data-key="ai" id="togAI" role="switch" aria-checked="true"><i></i></div>
          </div>
        </div>
        <div class="setCard">
          <b>Modo Vibrante</b>
          <small>Aumenta contraste e “pop” das cores.</small>
          <div class="switch">
            <span class="muted">Mais impacto visual.</span>
            <div class="toggle on" data-key="vibrant" id="togVibrant" role="switch" aria-checked="true"><i></i></div>
          </div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="setCard">
        <b>Endpoint do Worker (opcional)</b>
        <small>Para verificação de pedidos e/ou IA. Pode deixar vazio para modo local.</small>
        <div class="row2" style="margin-top:10px">
          <input class="input" id="workerUrl" placeholder="https://seu-worker.workers.dev" autocomplete="off"/>
          <button class="btn" id="saveWorkerUrl" type="button">Salvar</button>
        </div>
        <p class="muted" style="margin:8px 0 0">Atual: <b id="workerUrlLabel">local</b></p>
      </div>
    </div>
  </section>

  <!-- AI modal -->
  <div class="scrim" id="aiScrim"></div>
  <section class="modal" id="aiModal" role="dialog" aria-modal="true" aria-labelledby="aiTitle">
    <div class="modalHead">
      <h3 id="aiTitle">Assistente</h3>
      <button class="closeX" id="closeAI" type="button" aria-label="Fechar">✕</button>
    </div>
    <div class="modalBody">
      <div class="setCard">
        <b>Digite sua dúvida</b>
        <small>Se não houver IA conectada, eu abro o Discord com um texto pronto.</small>
        <div class="hr"></div>
        <textarea class="input" id="aiText" rows="4" placeholder="Ex: meu pedido está em análise, o que faço?"></textarea>
        <div class="row2" style="margin-top:10px">
          <button class="btn primary" id="aiSend" type="button">Enviar</button>
          <button class="btn" id="aiToDiscord" type="button">Mandar no Discord</button>
        </div>
        <div class="hr"></div>
        <div class="note" id="aiAnswer">• Dica: inclua seu Order ID e o produto.</div>
      </div>
    </div>
  </section>

  <script>
    // =========================
    //  Core state + persistence
    // =========================
    const $ = (s, r=document)=>r.querySelector(s);
    const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));
    const store = {
      get(k, d=null){ try{ const v=localStorage.getItem(k); return v===null?d:JSON.parse(v);}catch(e){return d;} },
      set(k, v){ try{ localStorage.setItem(k, JSON.stringify(v)); }catch(e){} }
    };

    const state = {
      products: [],
      cart: store.get("vv_cart", {}),
      lastOrder: store.get("vv_lastOrder", null),
      settings: store.get("vv_settings", {
        lite:false, reduceMotion:false, sound:true, haptics:true, ai:true, vibrant:true,
        workerUrl:""
      }),
      lang: store.get("vv_lang", "PT-BR"),
    };

    // =========================
    //  Settings apply
    // =========================
    function applySettings(){
      const s = state.settings;
      document.documentElement.classList.toggle("lite", !!s.lite);
      document.documentElement.classList.toggle("reduce-motion", !!s.reduceMotion);
      document.documentElement.style.setProperty("--stroke2", s.vibrant ? "rgba(123,209,255,.26)" : "rgba(123,209,255,.16)");
      $("#workerUrlLabel").textContent = s.workerUrl ? s.workerUrl : "local";

      setToggle($("#togLite"), s.lite);
      setToggle($("#togMotion"), s.reduceMotion || window.matchMedia("(prefers-reduced-motion: reduce)").matches);
      setToggle($("#togSound"), s.sound);
      setToggle($("#togHaptics"), s.haptics);
      setToggle($("#togAI"), s.ai);
      setToggle($("#togVibrant"), s.vibrant);

      $("#workerUrl").value = s.workerUrl || "";
    }
    function setToggle(el, on){
      el.classList.toggle("on", !!on);
      el.setAttribute("aria-checked", !!on);
    }

    function haptic(ms=12){ if(state.settings.haptics && navigator.vibrate) navigator.vibrate(ms); }
    function clickSound(){
      if(!state.settings.sound) return;
      try{
        const ctx = window.__vv_audio || (window.__vv_audio = new (window.AudioContext || window.webkitAudioContext)());
        if(ctx.state === "suspended") ctx.resume();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = "triangle";
        o.frequency.value = 520 + Math.random()*60;
        g.gain.value = 0.0001;
        o.connect(g); g.connect(ctx.destination);
        const t = ctx.currentTime;
        g.gain.setValueAtTime(0.0001, t);
        g.gain.exponentialRampToValueAtTime(0.08, t + 0.015);
        g.gain.exponentialRampToValueAtTime(0.0001, t + 0.09);
        o.start(t);
        o.stop(t + 0.10);
      }catch(e){}
    }

    function bindButtonFX(){
      $$("button").forEach(b=>{
        b.addEventListener("click", ()=>{ haptic(10); clickSound(); }, {passive:true});
      });
    }

    // =========================
    //  Fake catalog (replace later)
    // =========================
    const baseCatalog = [
      {id:"brainrot-pack", name:"Steal a Brainrot — Pack", desc:"Pacote rápido (entrega por Order ID)", price: 19.90, tag:"Popular"},
      {id:"brainrot-boost", name:"Brainrot Boost — Turbo", desc:"Boost premium (prioridade)", price: 39.90, tag:"Prioridade"},
      {id:"bloxfruits-kit", name:"Blox Fruits — Kit Pro", desc:"Kit de progressão", price: 29.90, tag:"Top"},
      {id:"robux-gift", name:"Gift Card — Créditos", desc:"Créditos (verificar regras)", price: 49.90, tag:"Seguro"},
      {id:"account-audit", name:"Audit — Conta Roblox", desc:"Checklist + recomendações", price: 9.90, tag:"Rápido"},
      {id:"vip-pass", name:"VIP Pass — Delivery 24h", desc:"Fila prioritária", price: 14.90, tag:"24h"},
      {id:"skin-bundle", name:"Bundle — Visual", desc:"Itens cosméticos / bundle", price: 24.90, tag:"Estilo"},
      {id:"mystery", name:"Mystery Drop — Surpresa", desc:"Drop surpresa (divertido)", price: 12.90, tag:"Novo"},
    ];

    function loadCatalog(){
      // you can wire to your worker later; for now local
      state.products = baseCatalog.slice();
      renderProducts();
    }

    // =========================
    //  Cart + UI
    // =========================
    function cartCount(){
      return Object.values(state.cart).reduce((a, n)=>a + n, 0);
    }
    function cartTotal(){
      let total = 0;
      for(const [id, qty] of Object.entries(state.cart)){
        const p = state.products.find(x=>x.id===id);
        if(p) total += p.price * qty;
      }
      return total;
    }
    function money(v){
      return (v||0).toLocaleString("pt-BR", {style:"currency", currency:"BRL"});
    }

    function renderProducts(){
      const q = ($("#search").value || "").trim().toLowerCase();
      const list = $("#productList");
      const items = state.products.filter(p=>{
        if(!q) return true;
        return (p.name + " " + p.desc + " " + p.tag).toLowerCase().includes(q);
      });

      list.innerHTML = items.map(p=>{
        const qty = state.cart[p.id] || 0;
        return `
          <div class="item" data-id="${p.id}">
            <div>
              <b>${p.name}</b>
              <small>${p.desc}</small>
              <small style="margin-top:6px;color:rgba(123,209,255,.88)">${p.tag} • ${money(p.price)}</small>
            </div>
            <div class="qty" aria-label="Quantidade">
              <button class="iconBtn" data-act="minus" type="button" aria-label="Remover">−</button>
              <b style="min-width:16px;text-align:center">${qty}</b>
              <button class="iconBtn" data-act="plus" type="button" aria-label="Adicionar">+</button>
            </div>
          </div>
        `;
      }).join("");

      $("#cartCount").textContent = cartCount();
      updateTotals();
    }

    function updateTotals(){
      const c = cartCount();
      $("#totalItems").textContent = `${c} itens`;
      $("#totalPrice").textContent = money(cartTotal());
      $("#totalHint").textContent = c ? "Itens do carrinho" : "Adicione itens no catálogo";
    }

    function setCart(id, qty){
      if(qty<=0) delete state.cart[id];
      else state.cart[id]=qty;
      store.set("vv_cart", state.cart);
      renderProducts();
    }

    // =========================
    //  Navigation
    // =========================
    const views = {
      catalog: $("#viewCatalog"),
      checkout: $("#viewCheckout"),
      order: $("#viewOrder"),
      faq: $("#viewFaq"),
    };
    function go(view){
      for(const [k, el] of Object.entries(views)){
        el.style.display = (k===view) ? "" : "none";
      }
      $$(".navBtn").forEach(b=>b.classList.toggle("active", b.dataset.go===view));
      if(view==="checkout") updateTotals();
      if(view==="order") $("#orderLookup").value = state.lastOrder?.id || "";
      window.scrollTo({top: 0, behavior: state.settings.reduceMotion ? "auto" : "smooth"});
    }

    // =========================
    //  Order flow (local fallback)
    // =========================
    function genOrderId(){
      const t = Date.now().toString(36).slice(-6).toUpperCase();
      const r = Math.random().toString(36).slice(2,8).toUpperCase();
      return `VV-${t}-${r}`;
    }
    function setLastOrder(order){
      state.lastOrder = order;
      store.set("vv_lastOrder", order);
      $("#lastOrder").textContent = order ? `${order.id} • ${order.status}` : "—";
      $("#orderId").textContent = order ? order.id : "—";
    }
    function localOrderStatus(id){
      // deterministic-ish statuses by hash
      let h=0; for(const c of id) h=(h*31 + c.charCodeAt(0))>>>0;
      const p = h % 100;
      if(p<35) return {status:"Aguardando pagamento", eta:"—"};
      if(p<60) return {status:"Em análise", eta:"~ 10–30 min"};
      if(p<85) return {status:"Em processamento", eta:"~ 1–3 h"};
      return {status:"Entregue", eta:"Concluído"};
    }

    async function workerCheckOrder(id){
      const url = state.settings.workerUrl;
      if(!url) return null;
      try{
        const res = await fetch(url.replace(/\/$/,"") + "/order?orderId=" + encodeURIComponent(id), {method:"GET"});
        if(!res.ok) return null;
        return await res.json();
      }catch(e){ return null; }
    }

    // =========================
    //  FAQ build
    // =========================
    const faq = [
      {q:"Como sei que é oficial?", a:"Use a aba Pedido e verifique o status no Worker oficial (quando configurado). Caso contrário, use o Discord oficial e sempre informe seu Order ID."},
      {q:"Quanto tempo para entrega?", a:"Depende do produto. Itens com prioridade (24h) entram na frente. Em geral, atualizações aparecem em minutos após confirmação."},
      {q:"Posso pedir suporte fora do site?", a:"Recomendado: Discord. Evite DMs de desconhecidos. Nunca compartilhe senha."},
      {q:"Meu pagamento PIX foi feito e não atualizou", a:"Aguarde alguns minutos e tente de novo. Se persistir, abra ticket no Discord com o Order ID e o comprovante."},
    ];
    function renderFAQ(){
      const el = $("#faqBody");
      el.innerHTML = faq.map((x,i)=>`
        <details class="setCard" ${i===0?"open":""} style="margin-bottom:10px">
          <summary style="cursor:pointer; font-weight:700; font-size:13px;">${x.q}</summary>
          <div class="muted" style="margin-top:10px; line-height:1.5">${x.a}</div>
        </details>
      `).join("");
    }

    // =========================
    //  Performance: FPS + Anti-lag test
    // =========================
    function fpsMeter(){
      let last = performance.now();
      let frames = 0;
      let acc = 0;
      let rafId = 0;
      function tick(now){
        const dt = now - last;
        last = now;
        frames++;
        acc += dt;
        if(acc >= 900){
          const fps = Math.round(frames * 1000 / acc);
          $("#fpsBadge").textContent = String(fps);
          frames=0; acc=0;
        }
        rafId = requestAnimationFrame(tick);
      }
      rafId = requestAnimationFrame(tick);
      return ()=>cancelAnimationFrame(rafId);
    }

    async function antiLagTest(){
      const start = performance.now();
      let worst = 0;
      let jank = 0;
      let last = performance.now();
      return new Promise(resolve=>{
        function step(t){
          const dt = t - last; last = t;
          worst = Math.max(worst, dt);
          if(dt > 32) jank++;
          if(t - start > 2000){
            resolve({worst, jank});
            return;
          }
          requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      });
    }

    // =========================
    //  Modals
    // =========================
    function openModal(scrim, modal){
      scrim.style.display = "block";
      modal.style.display = "block";
      setTimeout(()=>{ modal.focus?.(); }, 0);
    }
    function closeModal(scrim, modal){
      scrim.style.display = "none";
      modal.style.display = "none";
    }

    // =========================
    //  AI (optional) — if worker exposes /ai
    // =========================
    async function workerAI(text){
      const url = state.settings.workerUrl;
      if(!url) return null;
      try{
        const res = await fetch(url.replace(/\/$/,"") + "/ai", {
          method:"POST",
          headers:{ "content-type":"application/json" },
          body: JSON.stringify({ message:text, lang: state.lang })
        });
        if(!res.ok) return null;
        return await res.json();
      }catch(e){ return null; }
    }

    // =========================
    //  Boot
    // =========================
    function boot(){
      // Status
      $("#statusLine").textContent = "Sistema online • cache pronto";
      $("#langLabel").textContent = state.lang;

      applySettings();
      renderFAQ();

      // Set initial views
      go("catalog");

      // Catalog init (defer heavy)
      const startCatalog = ()=>{ loadCatalog(); bindButtonFX(); };
      if("requestIdleCallback" in window){
        requestIdleCallback(startCatalog, {timeout: 1200});
      }else{
        setTimeout(startCatalog, 80);
      }

      // Last order
      if(state.lastOrder) setLastOrder(state.lastOrder);

      // Wire events
      $("#search").addEventListener("input", ()=>renderProducts(), {passive:true});

      $("#productList").addEventListener("click", (e)=>{
        const btn = e.target.closest("button");
        if(!btn) return;
        const card = e.target.closest(".item");
        if(!card) return;
        const id = card.dataset.id;
        const act = btn.dataset.act;
        const cur = state.cart[id] || 0;
        if(act==="plus") setCart(id, cur+1);
        if(act==="minus") setCart(id, cur-1);
      });

      // CTAs
      $("#goCatalog").onclick = ()=>go("catalog");
      $("#goCheckout").onclick = ()=>go("checkout");
      $("#goOrder").onclick = ()=>go("order");
      $("#openCart").onclick = ()=>go("checkout");
      $("#quickCheckout").onclick = ()=>go("checkout");

      // Bottom nav
      $$(".navBtn").forEach(b=> b.onclick = ()=>go(b.dataset.go));

      // Order gen
      $("#genOrder").onclick = ()=>{
        const id = genOrderId();
        const order = { id, status:"Aguardando pagamento", at: Date.now(), total: cartTotal() };
        setLastOrder(order);
        $("#orderId").textContent = id;
        $("#orderLookup").value = id;
      };
      $("#copyOrder").onclick = async ()=>{
        const id = $("#orderId").textContent.trim();
        if(!id || id==="—") return;
        try{ await navigator.clipboard.writeText(id); $("#checkoutNote").textContent = "Order ID copiado ✔"; }
        catch(e){ $("#checkoutNote").textContent = "Não consegui copiar. Segure e copie manualmente."; }
        setTimeout(()=>$("#checkoutNote").textContent = "Depois do pagamento, vá em Pedido e use seu Order ID para acompanhar. Suporte oficial: Discord.", 1800);
      };

      $("#copyPix").onclick = async ()=>{
        const v = $("#pix").value.trim();
        if(!v) return;
        try{ await navigator.clipboard.writeText(v); $("#checkoutNote").textContent = "PIX copiado ✔"; }
        catch(e){ $("#checkoutNote").textContent = "Não consegui copiar. Segure e copie manualmente."; }
        setTimeout(()=>$("#checkoutNote").textContent = "Depois do pagamento, vá em Pedido e use seu Order ID para acompanhar. Suporte oficial: Discord.", 1800);
      };

      $("#confirmPaid").onclick = ()=>{
        if(!state.lastOrder){
          $("#checkoutNote").textContent = "Primeiro gere seu Order ID.";
          setTimeout(()=>$("#checkoutNote").textContent = "Depois do pagamento, vá em Pedido e use seu Order ID para acompanhar. Suporte oficial: Discord.", 1800);
          return;
        }
        // optimistic update
        state.lastOrder.status = "Em análise";
        setLastOrder(state.lastOrder);
        $("#checkoutNote").textContent = "Pagamento registrado. Indo para Pedido…";
        setTimeout(()=>go("order"), 550);
      };

      $("#checkOrder").onclick = async ()=>{
        const id = ($("#orderLookup").value||"").trim();
        if(!id){ $("#orderStatus").textContent = "Cole o Order ID."; return; }
        $("#orderStatus").textContent = "Verificando…";
        $("#kpiEta").textContent = "—";

        // Try worker first; fallback local
        const r = await workerCheckOrder(id);
        if(r && (r.status || r.state)){
          const st = r.status || r.state || "Atualizado";
          $("#orderStatus").textContent = st;
          $("#kpiEta").textContent = r.eta || "—";
          $("#kpiIntegrity").textContent = "OK (Worker)";
          return;
        }

        const local = localOrderStatus(id);
        $("#orderStatus").textContent = local.status;
        $("#kpiEta").textContent = local.eta;
        $("#kpiIntegrity").textContent = "Ativo (local)";
      };

      // Discord (placeholder link)
      function openDiscordPrefill(text){
        // Put your invite or support link here:
        const invite = "https://discord.com";
        window.open(invite, "_blank", "noopener");
        // (prefill is platform-dependent; leaving as open)
      }
      $("#discordBtn").onclick = ()=>openDiscordPrefill("Olá! Preciso de suporte.");
      $("#discordHelp").onclick = ()=>openDiscordPrefill("Olá! Preciso de suporte para meu pedido.");
      $("#aiToDiscord").onclick = ()=>{
        const msg = ($("#aiText").value||"").trim();
        openDiscordPrefill(msg || "Olá! Preciso de suporte.");
      };
      $("#reloadCatalog").onclick = ()=>{ loadCatalog(); $("#perfResult").textContent = "Catálogo recarregado ✔"; setTimeout(()=>$("#perfResult").textContent="• Otimização automática: carga pesada inicia quando o navegador está “ocioso”.", 1400); };
      $("#resetLocal").onclick = ()=>{
        if(!confirm("Resetar carrinho e dados locais?")) return;
        state.cart = {};
        store.set("vv_cart", state.cart);
        setLastOrder(null);
        store.set("vv_lastOrder", null);
        renderProducts();
        $("#perfResult").textContent = "Reset local feito ✔";
        setTimeout(()=>$("#perfResult").textContent="• Otimização automática: carga pesada inicia quando o navegador está “ocioso”.", 1400);
      };

      $("#perfTest").onclick = async ()=>{
        $("#perfResult").textContent = "Medindo travadas…";
        const r = await antiLagTest();
        $("#perfResult").textContent = `Teste: maior frame ${Math.round(r.worst)}ms • janks ${r.jank} (2s). Dica: ative Lite se estiver alto.`;
      };

      // Settings modal
      $("#settingsBtn").onclick = ()=>openModal($("#scrim"), $("#settingsModal"));
      $("#closeSettings").onclick = ()=>closeModal($("#scrim"), $("#settingsModal"));
      $("#scrim").onclick = ()=>closeModal($("#scrim"), $("#settingsModal"));

      // Toggles
      $$(".toggle").forEach(t=>{
        t.onclick = ()=>{
          const key = t.dataset.key;
          const cur = !!state.settings[key];
          state.settings[key] = !cur;
          store.set("vv_settings", state.settings);
          applySettings();
        };
      });
      $("#saveWorkerUrl").onclick = ()=>{
        state.settings.workerUrl = ($("#workerUrl").value||"").trim();
        store.set("vv_settings", state.settings);
        applySettings();
        $("#perfResult").textContent = state.settings.workerUrl ? "Worker salvo ✔" : "Modo local ✔";
        setTimeout(()=>$("#perfResult").textContent="• Otimização automática: carga pesada inicia quando o navegador está “ocioso”.", 1400);
      };

      // AI modal
      const aiScrim = $("#aiScrim"), aiModal = $("#aiModal");
      $("#aiBtn").onclick = ()=>{
        if(!state.settings.ai){
          $("#fabBubble").style.display="block";
          $("#fabBubble").textContent="IA desativada nas configurações.";
          setTimeout(()=>$("#fabBubble").style.display="none", 1600);
          return;
        }
        openModal(aiScrim, aiModal);
      };
      $("#closeAI").onclick = ()=>closeModal(aiScrim, aiModal);
      aiScrim.onclick = ()=>closeModal(aiScrim, aiModal);

      $("#aiSend").onclick = async ()=>{
        const text = ($("#aiText").value||"").trim();
        if(!text){ $("#aiAnswer").textContent = "Digite sua pergunta."; return; }
        $("#aiAnswer").textContent = "Pensando…";
        const r = await workerAI(text);
        if(r && (r.answer || r.message)){
          $("#aiAnswer").textContent = (r.answer || r.message);
          return;
        }
        $("#aiAnswer").textContent = "IA não conectada. Use o botão “Mandar no Discord” (vou abrir o Discord).";
      };

      // Language dropdown (simple cycle)
      $("#langBtn").onclick = ()=>{
        state.lang = (state.lang==="PT-BR") ? "EN" : "PT-BR";
        store.set("vv_lang", state.lang);
        $("#langLabel").textContent = state.lang;
        $("#fabBubble").style.display="block";
        $("#fabBubble").textContent = state.lang==="EN" ? "Language: EN (demo)" : "Idioma: PT-BR";
        setTimeout(()=>$("#fabBubble").style.display="none", 1200);
      };

      // Quick open to views
      $("#reloadCatalog").addEventListener("click", ()=>go("catalog"));
      $("#quickCheckout").addEventListener("click", ()=>go("checkout"));
      $("#goOrder").addEventListener("click", ()=>go("order"));

      // Show bubble occasionally
      setTimeout(()=>{
        $("#fabBubble").style.display="block";
        $("#fabBubble").textContent="Precisa de ajuda?";
        setTimeout(()=>$("#fabBubble").style.display="none", 1600);
      }, 1600);

      // PWA hint
      $("#pwaBadge").textContent = (window.matchMedia("(display-mode: standalone)").matches) ? "PWA" : "Web";

      // FPS
      fpsMeter();
    }

    // Start
    boot();
  </script>
</body>
</html>
