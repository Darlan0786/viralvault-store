<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0b10" />
  <title>ViralVault Store</title>
  <style>
    :root{
      --bg:#0b0b10;
      --card:#12121a;
      --card2:#151523;
      --line:rgba(255,255,255,.08);
      --text:#f3f3ff;
      --muted:rgba(243,243,255,.72);
      --muted2:rgba(243,243,255,.55);
      --pink:#ff4fa3;
      --pink2:#ff2f8a;
      --yellow:#ffd24a;
      --green:#2bff88;
      --shadow: 0 24px 80px rgba(0,0,0,.65);
      --shadow2: 0 12px 44px rgba(0,0,0,.55);
      --r: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(255,79,163,.22), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, rgba(255,210,74,.16), transparent 58%),
        radial-gradient(900px 520px at 55% 120%, rgba(120,94,255,.14), transparent 60%),
        linear-gradient(180deg, #0b0b10 0%, #090910 100%);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      overflow-x:hidden;
    }

    a{color:inherit}

    .wrap{max-width:1100px; margin:0 auto; padding:18px 16px 110px;}

    /* Topbar */
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      position:sticky; top:0; z-index:30;
      padding:12px 0;
      backdrop-filter: blur(12px);
      background: linear-gradient(180deg, rgba(11,11,16,.82), rgba(11,11,16,.35));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .brand{display:flex; align-items:center; gap:10px; min-width:0}
    .logo{
      width:40px; height:40px; border-radius:14px;
      background:
        radial-gradient(120% 120% at 25% 20%, rgba(255,210,74,.9), rgba(255,79,163,.8) 45%, rgba(120,94,255,.55) 85%),
        linear-gradient(180deg, rgba(255,255,255,.2), rgba(255,255,255,0));
      box-shadow: 0 16px 44px rgba(255,79,163,.14);
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.12);
    }
    .logo span{font-weight:900; letter-spacing:.5px}
    .btxt{display:flex; flex-direction:column; line-height:1.1; min-width:0}
    .btxt strong{font-size:14px}
    .btxt small{font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:999px;
      background: rgba(18,18,26,.62);
      box-shadow: var(--shadow2);
    }
    .dot{width:9px; height:9px; border-radius:50%; background:var(--green); box-shadow: 0 0 0 6px rgba(43,255,136,.12)}
    .pill b{font-size:12px}
    .pill span{font-size:12px; color:var(--muted)}

    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end}

    .btn{
      border:0; cursor:pointer;
      padding:11px 14px;
      border-radius:16px;
      font-weight:800;
      color:var(--text);
      background: rgba(18,18,26,.72);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow2);
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      display:inline-flex; align-items:center; gap:10px;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.18)}
    .btn:active{transform: translateY(0px) scale(.99)}

    .btnPrimary{
      background: linear-gradient(135deg, rgba(255,79,163,.95), rgba(255,47,138,.92));
      border-color: rgba(255,255,255,.10);
      box-shadow: 0 18px 55px rgba(255,79,163,.18);
    }

    .btnGhost{
      background: rgba(18,18,26,.45);
    }

    /* Hero */
    .hero{
      display:grid;
      grid-template-columns: 1.12fr .88fr;
      gap:16px;
      padding:18px 0 10px;
    }
    @media (max-width: 920px){
      .hero{grid-template-columns:1fr;}
    }

    .heroCard{
      border-radius: var(--r);
      background:
        radial-gradient(1100px 420px at 20% 10%, rgba(255,79,163,.16), transparent 62%),
        radial-gradient(820px 460px at 80% 40%, rgba(255,210,74,.14), transparent 65%),
        linear-gradient(180deg, rgba(18,18,26,.84), rgba(18,18,26,.56));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .heroCard::before{
      content:"";
      position:absolute; inset:-1px;
      background: linear-gradient(135deg, rgba(255,79,163,.28), rgba(255,210,74,.18), rgba(120,94,255,.18));
      opacity:.35;
      filter: blur(18px);
      z-index:0;
    }
    .heroInner{position:relative; z-index:1; padding:18px 18px 16px;}
    .badgeRow{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
    .tag{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 10px;
      background: rgba(11,11,16,.45);
      border:1px solid rgba(255,255,255,.10);
      border-radius:999px;
      font-size:12px; color:var(--muted);
    }
    .tag i{width:8px; height:8px; border-radius:50%; display:inline-block; background: var(--yellow); box-shadow: 0 0 0 6px rgba(255,210,74,.12)}

    h1{margin:14px 0 10px; font-size:42px; line-height:1.05; letter-spacing:-.02em}
    @media (max-width: 520px){ h1{font-size:34px} }

    .sub{color:var(--muted); font-size:14px; line-height:1.5; margin:0 0 14px}

    .heroCtas{display:flex; flex-wrap:wrap; gap:10px; align-items:center}

    .miniProof{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    @media (max-width: 520px){
      .miniProof{grid-template-columns:1fr;}
    }
    .stat{
      border-radius:18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(11,11,16,.35);
      padding:12px;
      box-shadow: var(--shadow2);
    }
    .stat b{display:block; font-size:14px}
    .stat span{display:block; font-size:12px; color:var(--muted); margin-top:3px}

    .sideCard{
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(18,18,26,.75), rgba(18,18,26,.52));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      padding:16px;
      overflow:hidden;
      position:relative;
    }
    .sideCard::after{
      content:"";
      position:absolute; right:-40px; top:-40px;
      width:160px; height:160px;
      background: radial-gradient(circle at 30% 30%, rgba(255,210,74,.35), transparent 65%);
      filter: blur(6px);
      opacity:.85;
    }
    .sideCard h3{margin:0 0 8px; font-size:16px}
    .sideCard p{margin:0 0 12px; color:var(--muted); font-size:13px; line-height:1.45}

    .inputRow{display:flex; gap:10px; flex-wrap:wrap}
    .inp{
      flex:1;
      min-width: 220px;
      border-radius:16px;
      padding:12px 12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(11,11,16,.35);
      color:var(--text);
      outline:none;
      box-shadow: var(--shadow2);
    }
    .inp::placeholder{color: rgba(243,243,255,.45)}

    /* Sections */
    .sectionTitle{display:flex; align-items:baseline; justify-content:space-between; gap:10px; margin:18px 0 10px}
    .sectionTitle h2{margin:0; font-size:20px}
    .sectionTitle small{color:var(--muted2)}

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width: 620px){ .grid{grid-template-columns: 1fr;} }

    .card{
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(18,18,26,.82), rgba(18,18,26,.56));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow2);
      padding:14px;
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(420px 220px at 15% 20%, rgba(255,79,163,.20), transparent 60%),
                  radial-gradient(520px 240px at 90% 10%, rgba(255,210,74,.14), transparent 62%);
      opacity:.8;
      z-index:0;
    }
    .card > *{position:relative; z-index:1}

    .krow{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px}
    .chip{
      display:inline-flex; gap:8px; align-items:center;
      padding:7px 10px;
      border-radius:999px;
      background: rgba(11,11,16,.35);
      border:1px solid rgba(255,255,255,.10);
      color:var(--muted);
      font-size:12px;
    }
    .chip i{width:8px; height:8px; border-radius:50%; background: var(--green); display:inline-block}
    .chip.prem i{background: var(--yellow)}
    .chip.custom i{background: var(--pink)}

    .title{font-size:18px; margin:0 0 6px}
    .desc{margin:0 0 12px; color:var(--muted); font-size:13px; line-height:1.45}

    .priceRow{display:flex; align-items:end; justify-content:space-between; gap:10px}
    .price{
      font-size:28px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .currency{font-size:14px; color:var(--muted2); font-weight:700}

    .buy{
      padding:12px 14px;
      border-radius:16px;
      border:0;
      cursor:pointer;
      font-weight:900;
      color:var(--text);
      background: linear-gradient(135deg, rgba(255,79,163,.95), rgba(255,47,138,.92));
      box-shadow: 0 18px 55px rgba(255,79,163,.20);
      border:1px solid rgba(255,255,255,.10);
      transition: transform .12s ease;
      min-width: 145px;
    }
    .buy:hover{transform: translateY(-1px)}
    .buy:active{transform: translateY(0px) scale(.99)}

    /* How it works */
    .how{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
      margin-top:10px;
    }
    @media (max-width: 820px){ .how{grid-template-columns:1fr;} }
    .step{
      border-radius: var(--r);
      padding:14px;
      background: linear-gradient(180deg, rgba(18,18,26,.74), rgba(18,18,26,.48));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow2);
    }
    .num{
      width:34px; height:34px; border-radius:14px;
      display:grid; place-items:center;
      background: rgba(255,210,74,.12);
      border:1px solid rgba(255,210,74,.24);
      color: var(--yellow);
      font-weight:900;
      margin-bottom:10px;
    }
    .step b{display:block; margin-bottom:6px}
    .step span{color:var(--muted); font-size:13px; line-height:1.45}

    /* Footer */
    .footer{margin-top:18px; color:var(--muted2); font-size:12px; text-align:center}

    /* Modal */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.62);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:50;
      padding:18px;
    }
    .overlay.show{display:flex}

    .modal{
      width:min(760px, 100%);
      border-radius: 26px;
      background:
        radial-gradient(900px 420px at 15% 10%, rgba(255,79,163,.18), transparent 65%),
        radial-gradient(760px 420px at 85% 20%, rgba(255,210,74,.14), transparent 65%),
        linear-gradient(180deg, rgba(18,18,26,.92), rgba(18,18,26,.76));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .modalHead{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      padding:14px 14px 10px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .modalHead b{font-size:14px}
    .x{
      width:42px; height:42px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(11,11,16,.30);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
    }

    .modalBody{padding:14px}

    .box{
      border-radius: 20px;
      background: rgba(11,11,16,.30);
      border:1px solid rgba(255,255,255,.10);
      padding:12px;
      box-shadow: var(--shadow2);
      margin-bottom:10px;
    }
    .boxTitle{display:flex; justify-content:space-between; align-items:baseline; gap:10px}
    .boxTitle b{font-size:16px}
    .boxTitle span{color:var(--muted); font-size:12px}

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width: 720px){ .row{grid-template-columns:1fr;} }

    .ctaBig{
      width:100%;
      padding:14px 14px;
      border-radius: 18px;
      border:0;
      cursor:pointer;
      font-weight:1000;
      color:var(--text);
      background: linear-gradient(135deg, rgba(255,79,163,.98), rgba(255,47,138,.92));
      box-shadow: 0 18px 55px rgba(255,79,163,.20);
      border:1px solid rgba(255,255,255,.10);
      transition: transform .12s ease;
    }
    .ctaBig:hover{transform: translateY(-1px)}

    .small{font-size:12px; color:var(--muted); margin-top:6px}

    .mono{
      width:100%;
      min-height:92px;
      resize:none;
      border-radius:18px;
      padding:12px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(11,11,16,.35);
      color:var(--text);
      outline:none;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
      line-height:1.45;
    }

    .miniBtns{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px}
    .mini{
      padding:10px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(11,11,16,.30);
      color:var(--text);
      font-weight:900;
      cursor:pointer;
    }

    .notice{
      margin-top:10px;
      border-radius: 18px;
      padding:12px;
      border:1px dashed rgba(255,210,74,.30);
      background: rgba(255,210,74,.08);
      color: rgba(255,245,210,.95);
      font-size:12px;
      line-height:1.45;
    }

    /* Floating support */
    .float{
      position:fixed;
      right:14px;
      bottom:14px;
      z-index:60;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:flex-end;
    }

    /* ===== UI offsets (evitar bot√µes grudados / safe-area) ===== */
    :root{ --bb: 0px; }
    .bottomBar{ padding-bottom: calc(10px + env(safe-area-inset-bottom)); }
    .float{ bottom: calc(14px + var(--bb) + env(safe-area-inset-bottom)); }
    body.chatOpen .bottomBar{ transform: translateY(120%); opacity:0; pointer-events:none; }
    body.chatOpen .float{ bottom: calc(14px + env(safe-area-inset-bottom)); }
    body.chatOpen .modal.show + .float{ bottom: calc(14px + env(safe-area-inset-bottom)); }

    .fab{
      border:0; cursor:pointer;
      border-radius: 999px;
      padding:14px 14px;
      font-weight:1000;
      color:var(--text);
      background:
        radial-gradient(120% 120% at 25% 20%, rgba(255,210,74,.75), rgba(255,79,163,.75) 52%, rgba(120,94,255,.50) 100%),
        linear-gradient(180deg, rgba(255,255,255,.2), rgba(255,255,255,0));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 24px 90px rgba(0,0,0,.6);
      display:inline-flex; align-items:center; gap:10px;
    }

    .chat{
      width:min(420px, calc(100vw - 28px));
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(18,18,26,.92), rgba(18,18,26,.72));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      display:none;
    }
    .chat.show{display:block}
    .chatHead{display:flex; align-items:center; justify-content:space-between; padding:12px 12px; border-bottom:1px solid rgba(255,255,255,.08)}
    .chatHead b{font-size:13px}
    .chatHead small{display:block; color:var(--muted); font-size:11px; margin-top:2px}

    .chatBody{max-height: 52vh; overflow:auto; padding:12px; display:flex; flex-direction:column; gap:10px}
    .m{
      width:fit-content;
      max-width: 92%;
      border-radius: 18px;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(11,11,16,.35);
      color:var(--text);
      font-size:13px;
      line-height:1.45;
      white-space:pre-wrap;
    }
    .me{margin-left:auto; background: rgba(255,79,163,.16); border-color: rgba(255,79,163,.22)}
    .ai{margin-right:auto}

    .chatFoot{display:flex; gap:10px; padding:12px; border-top:1px solid rgba(255,255,255,.08)}
    .send{min-width: 88px}

    /* Sticky bottom bar */
    .bottomBar{
      position:fixed; left:0; right:0; bottom:0;
      z-index:25;
      background: linear-gradient(180deg, rgba(11,11,16,0), rgba(11,11,16,.82) 35%, rgba(11,11,16,.95));
      padding:10px 0 12px;
      border-top:1px solid rgba(255,255,255,.06);
      backdrop-filter: blur(12px);
    }
    .bottomInner{
      max-width:1100px; margin:0 auto; padding:0 16px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .bottomInner span{color:var(--muted); font-size:12px}

    /* Toast */
    .toast{
      position:fixed; left:50%; transform:translateX(-50%);
      bottom:86px;
      background: rgba(18,18,26,.92);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      border-radius: 16px;
      padding:10px 12px;
      color:var(--text);
      font-size:12px;
      z-index:70;
      display:none;
    }
    .toast.show{display:block}

    /* Motion-lite */
    @media (prefers-reduced-motion: no-preference){
      .card{animation: floatIn .35s ease both;}
      .heroCard, .sideCard{animation: floatIn .35s ease both;}
      @keyframes floatIn{
        from{opacity:0; transform: translateY(10px)}
        to{opacity:1; transform: translateY(0px)}
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>VV</span></div>
        <div class="btxt">
          <strong>ViralVault Store</strong>
          <small id="subtitle">loja digital ‚Ä¢ PIX ‚Ä¢ entrega em at√© 24h</small>
        </div>
      </div>

      <div class="actions">
        <div class="pill" title="Status do sistema">
          <div class="dot" id="liveDot"></div>
          <div style="display:flex;flex-direction:column;line-height:1.1">
            <b id="liveTxt">Ao vivo</b>
            <span id="apiTxt">conectando‚Ä¶</span>
          </div>
        </div>
        <button class="btn btnGhost" id="btnVerify" type="button">üîé Verificar</button>
        <button class="btn btnPrimary" id="btnAdmin" type="button">üõ°Ô∏è Admin</button>
      </div>
    </div>

    <div class="hero">
      <div class="heroCard">
        <div class="heroInner">
          <div class="badgeRow">
            <div class="tag"><i></i> Anti-golpe ‚Ä¢ Order ID verific√°vel</div>
            <div class="tag"><i style="background:var(--pink); box-shadow:0 0 0 6px rgba(255,79,163,.12)"></i> Checkout 1-clique (PIX)</div>
            <div class="tag"><i style="background:rgba(120,94,255,1); box-shadow:0 0 0 6px rgba(120,94,255,.12)"></i> 100% digital</div>
          </div>

          <h1>Compre r√°pido, pague via PIX e receba ‚ú®</h1>
          <p class="sub">
            Escolha um item, gere seu pedido e copie o PIX. Seu <b>Order ID</b> vira comprovante e voc√™ consegue
            verificar aqui mesmo se o pedido √© oficial.
          </p>

          <div class="heroCtas">
            <button class="btn btnPrimary" type="button" id="btnScroll">üõí Ver produtos</button>
            <button class="btn" type="button" id="btnHow">üìå Como funciona</button>
          </div>

          <div class="miniProof">
            <div class="stat"><b>Entrega em at√© 24h</b><span>ou reembolso (SLA)</span></div>
            <div class="stat"><b>PIX + QR</b><span>copia e cola f√°cil</span></div>
            <div class="stat"><b>Verifica√ß√£o</b><span>anti-fake: confere o Order ID</span></div>
          </div>
        </div>
      </div>

      <div class="sideCard">
        <h3>Verificar pedido (anti-fake)</h3>
        <p>Cole o <b>Order ID</b> (ex: <span style="color:var(--yellow)">vv_...</span>) e veja o status.</p>

        <div class="inputRow">
          <input class="inp" id="verifyInput" placeholder="Cole aqui seu Order ID (vv_...)" />
          <button class="btn btnPrimary" id="verifyGo" type="button">Verificar</button>
        </div>
        <div class="box" style="margin-top:12px">
          <div class="boxTitle"><b>Status</b><span id="verifySmall">‚Äî</span></div>
          <div id="verifyOut" class="small" style="margin-top:6px">Ainda n√£o consultado.</div>
        </div>

        <div class="notice">
          Dica: ap√≥s pagar, mande o comprovante + seu user do Roblox no WhatsApp (se voc√™ quiser agilizar).
        </div>
      </div>
    </div>

    <div class="sectionTitle" id="produtos">
      <h2>Produtos digitais</h2>
      <small>escolha 1 item e pague via PIX</small>
    </div>

    <div class="grid" id="productsGrid"></div>

    <div class="sectionTitle" id="como">
      <h2>Como funciona üéÄ</h2>
      <small>super simples</small>
    </div>

    <div class="how">
      <div class="step"><div class="num">1</div><b>Escolha o item</b><span>Clique em <b>Comprar agora</b> e confirme o produto.</span></div>
      <div class="step"><div class="num">2</div><b>Pague via PIX</b><span>Gere o pedido ‚Üí copie o PIX (e QR se aparecer).</span></div>
      <div class="step"><div class="num">3</div><b>Receba em at√© 24h</b><span>Seu pedido fica com status: <b>criado ‚Üí pago ‚Üí entregue</b>.</span></div>
    </div>

    <div class="footer">¬© <span id="year"></span> ViralVault Store ‚Ä¢ Loja 100% digital ‚Ä¢ SP</div>
  </div>

  <!-- Sticky bottom bar -->
  <div class="bottomBar">
    <div class="bottomInner">
      <span>‚úÖ Dica: sempre verifique o Order ID aqui no site pra evitar golpe.</span>
      <button class="btn btnPrimary" type="button" id="btnStickyBuy">‚ö° Comprar agora</button>
    </div>
  </div>

  <!-- Checkout Modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Checkout PIX">
      <div class="modalHead">
        <b>Checkout (PIX) ‚Äî ultra simples</b>
        <button class="x" id="closeModal" type="button">‚úï</button>
      </div>
      <div class="modalBody">
        <div class="row">
          <div class="box">
            <div class="boxTitle"><b id="mProd">Produto</b><span id="mPrice">R$ ‚Äî</span></div>
            <div class="small" id="mDesc">‚Äî</div>
          </div>

          <div class="box">
            <div class="boxTitle"><b>Seu usu√°rio do Roblox</b><span>obrigat√≥rio</span></div>
            <input class="inp" id="mUser" placeholder="Ex: xDEADx786" />
            <div class="small">Sem user, n√£o d√° pra entregar. üòâ</div>
          </div>
        </div>

        <button class="ctaBig" id="genPix" type="button">Gerar pedido + PIX</button>

        <div class="box" style="margin-top:12px">
          <div class="boxTitle"><b>Order ID</b><span id="mStatus">‚Äî</span></div>
          <div class="small" id="mOrderId">‚Äî</div>
        </div>

        <div class="box">
          <div class="boxTitle"><b>PIX copia e cola</b><span>cole no app do banco</span></div>
          <textarea class="mono" id="mPix" placeholder="O PIX vai aparecer aqui‚Ä¶" readonly></textarea>
          <div class="miniBtns">
            <button class="mini" id="copyPix" type="button">Copiar PIX</button>
            <button class="mini" id="copyId" type="button">Copiar ID</button>
            <button class="mini" id="openVerify" type="button">Verificar pedido</button>
          </div>
          <div class="small" id="mHint">Depois de pagar, guarde o Order ID.</div>
        </div>

        <div class="notice">
          Aten√ß√£o: esse checkout cria um pedido no sistema. O pagamento √© via PIX ‚Äúcopia e cola‚Äù.
          Se o PIX n√£o aparecer, √© configura√ß√£o do Worker (vari√°vel <b>PIX_COPIA_COLA</b>).
        </div>
      </div>
    </div>
  </div>

  <!-- Support AI -->
  <div class="float">
    <div class="chat" id="chat">
      <div class="chatHead">
        <div>
          <b>Suporte IA</b>
          <small>responde sobre produtos, prazos, pedido e PIX (sem besteira)</small>
        </div>
        <button class="x" id="closeChat" type="button">‚úï</button>
      </div>
      <div class="chatBody" id="chatBody"></div>
      <div class="chatFoot">
        <input class="inp" id="chatIn" placeholder="Pergunte algo (ex: como verificar meu pedido?)" />
        <button class="btn btnPrimary send" id="chatSend" type="button">Enviar</button>
      </div>
    </div>
    <button class="fab" id="fab" type="button">ü§ñ Suporte IA</button>
  </div>

  <div class="toast" id="toast">Copiado ‚úÖ</div>

  <script>
    // ====== CONFIG ======
    // Seu Worker (API)
    const API_BASE = "https://viralvault-sign.darlanana06.workers.dev";

    // WhatsApp (opcional) ‚Äî coloque seu n√∫mero com DDI/DDD se quiser abrir conversa
    const WHATSAPP_NUMBER = "5511941598713";

    // ====== HELPERS ======
    const $ = (id)=>document.getElementById(id);
    const toast = (msg)=>{ const t=$('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'), 1400); };

    function brl(v){
      const n = Number(v);
      if (!Number.isFinite(n)) return "R$ --";
      return n.toLocaleString('pt-BR', { style:'currency', currency:'BRL' });
    }

    async function api(path, opts={}){
      const res = await fetch(API_BASE + path, {
        ...opts,
        headers: {
          'content-type':'application/json',
          ...(opts.headers||{})
        }
      });
      const text = await res.text();
      let data = {};
      try{ data = JSON.parse(text||"{}"); }catch{ data = { ok:false, error:"Resposta inv√°lida", raw:text }; }
      if(!res.ok && data && data.ok !== true){
        // mant√©m erro
      }
      return data;
    }

    function safeCopy(text){
      if(!text) return false;
      if(navigator.clipboard && navigator.clipboard.writeText){
        return navigator.clipboard.writeText(text).then(()=>true).catch(()=>false);
      }
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position='fixed';
      ta.style.left='-9999px';
      document.body.appendChild(ta);
      ta.focus(); ta.select();
      try{ document.execCommand('copy'); document.body.removeChild(ta); return true; }catch(e){ document.body.removeChild(ta); return false; }
    }

    // ====== PRODUCTS RENDER ======
    let PRODUCTS = [];
    let currentProduct = null;

    function chipClass(p){
      const name = (p.name||'').toLowerCase();
      if(name.includes('ultra') || name.includes('premium')) return 'prem';
      if(name.includes('custom') || name.includes('personal')) return 'custom';
      return '';
    }

    function chipLabel(p){
      const n=(p.name||'').toLowerCase();
      if(n.includes('ultra')) return {t:'Premium', cls:'prem'};
      if(n.includes('plus') || n.includes('pro')) return {t:'Popular', cls:''};
      if(n.includes('personal') || n.includes('custom')) return {t:'Custom', cls:'custom'};
      return {t:'Digital', cls:''};
    }

    function renderProducts(){
      const g = $('productsGrid');
      g.innerHTML = '';
      PRODUCTS.forEach((p, idx)=>{
        const c = document.createElement('div');
        c.className = 'card';
        c.style.animationDelay = (idx*35)+'ms';
        const chip = chipLabel(p);
        const subtitle = p.description ? p.description : 'Entrega 100% digital ‚Ä¢ em at√© 24h';
        c.innerHTML = `
          <div class="krow">
            <div class="chip ${chip.cls}"><i></i> ${chip.t} ‚Ä¢ üíæ Digital</div>
            <div class="chip" title="Pagamento via PIX"><i style="background:var(--yellow)"></i> PIX</div>
          </div>
          <h3 class="title">${escapeHtml(p.name||p.id)}</h3>
          <p class="desc">${escapeHtml(subtitle)}</p>
          <div class="priceRow">
            <div>
              <div class="currency">Pre√ßo</div>
              <div class="price">${brl(p.price)}</div>
            </div>
            <button class="buy" type="button">Comprar agora</button>
          </div>
        `;
        c.querySelector('.buy').addEventListener('click', ()=>openCheckout(p));
        g.appendChild(c);
      });
    }

    function escapeHtml(s){
      return String(s||'').replace(/[&<>"]/g, (m)=>({ '&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;' }[m]));
    }

    // ====== CHECKOUT ======
    function openCheckout(p){
      currentProduct = p;
      $('mProd').textContent = p.name || p.id;
      $('mPrice').textContent = brl(p.price);
      $('mDesc').textContent = p.description || 'Entrega 100% digital ‚Ä¢ em at√© 24h';
      $('mUser').value = '';
      $('mOrderId').textContent = '‚Äî';
      $('mPix').value = '';
      $('mStatus').textContent = '‚Äî';
      $('mHint').textContent = 'Depois de pagar, guarde o Order ID.';
      $('overlay').classList.add('show');
      $('overlay').setAttribute('aria-hidden','false');
      setTimeout(()=>$('mUser').focus(), 120);
    }

    function closeCheckout(){
      $('overlay').classList.remove('show');
      $('overlay').setAttribute('aria-hidden','true');
    }

    $('closeModal').addEventListener('click', closeCheckout);
    $('overlay').addEventListener('click', (e)=>{ if(e.target === $('overlay')) closeCheckout(); });

    $('genPix').addEventListener('click', async ()=>{
      if(!currentProduct) return;
      const user = ($('mUser').value || '').trim();
      if(!user){
        $('mStatus').textContent = '‚ö†Ô∏è user obrigat√≥rio';
        toast('Coloque seu user do Roblox');
        return;
      }

      $('genPix').disabled = true;
      $('genPix').textContent = 'Gerando‚Ä¶';
      $('mStatus').textContent = 'criando pedido‚Ä¶';

      try{
        const data = await api('/create-order', {
          method:'POST',
          body: JSON.stringify({ productId: currentProduct.id, user })
        });

        if(!data || data.ok !== true){
          $('mStatus').textContent = '‚ùå erro';
          $('mHint').textContent = (data && (data.error || data.detail)) ? (data.error || data.detail) : 'Falha ao criar pedido.';
          return;
        }

        const orderId = data.orderId || (data.order && data.order.orderId) || '';
        const pix = (data.pixCopiaECola || '').trim();

        $('mOrderId').textContent = orderId || '‚Äî';
        $('mStatus').textContent = '‚úÖ pedido criado';

        if(!pix){
          $('mPix').value = '';
          $('mHint').textContent = 'Pedido criado, mas o PIX n√£o veio. Confira a vari√°vel PIX_COPIA_COLA no Worker.';
        }else{
          $('mPix').value = pix;
          $('mHint').textContent = 'Agora cole o PIX no app do banco e pague.';
        }

      }catch(err){
        $('mStatus').textContent = '‚ùå erro';
        $('mHint').textContent = String(err && err.message ? err.message : err);
      }finally{
        $('genPix').disabled = false;
        $('genPix').textContent = 'Gerar pedido + PIX';
      }
    });

    $('copyPix').addEventListener('click', async ()=>{
      const v = $('mPix').value.trim();
      const ok = await safeCopy(v);
      toast(ok ? 'PIX copiado ‚úÖ' : 'N√£o deu pra copiar');
    });

    $('copyId').addEventListener('click', async ()=>{
      const v = ($('mOrderId').textContent || '').trim();
      const ok = await safeCopy(v);
      toast(ok ? 'ID copiado ‚úÖ' : 'N√£o deu pra copiar');
    });

    $('openVerify').addEventListener('click', ()=>{
      const v = ($('mOrderId').textContent || '').trim();
      closeCheckout();
      if(v && v.startsWith('vv_')){
        $('verifyInput').value = v;
        doVerify();
        window.scrollTo({ top: 0, behavior:'smooth' });
      }
    });

    // ====== VERIFY ======
    async function doVerify(){
      const orderId = ($('verifyInput').value || '').trim();
      if(!orderId){ $('verifyOut').textContent = 'Cole o Order ID.'; return; }
      $('verifySmall').textContent = 'consultando‚Ä¶';
      $('verifyOut').textContent = 'Aguenta a√≠‚Ä¶';
      try{
        const data = await api('/order-status?orderId=' + encodeURIComponent(orderId));
        if(!data || data.ok !== true){
          $('verifySmall').textContent = '‚ùå';
          $('verifyOut').textContent = (data && data.error) ? data.error : 'Pedido n√£o encontrado.';
          return;
        }
        const o = data.order || {};
        const st = String(o.status||'').toLowerCase();
        let label = st;
        if(st==='created') label = 'üßæ criado';
        if(st==='paid') label = '‚úÖ pago';
        if(st==='delivered') label = 'üì¶ entregue';
        $('verifySmall').textContent = label;
        $('verifyOut').textContent = `Produto: ${o.productName || o.productId || '-'}\nUser: ${o.user || '-'}\nStatus: ${label}\nOrder ID: ${o.orderId || orderId}`;
      }catch(err){
        $('verifySmall').textContent = '‚ùå';
        $('verifyOut').textContent = 'Erro: ' + String(err && err.message ? err.message : err);
      }
    }

    $('verifyGo').addEventListener('click', doVerify);
    $('btnVerify').addEventListener('click', ()=>{ $('verifyInput').focus(); window.scrollTo({top:0, behavior:'smooth'}); });

    // ====== Admin (no site, via token) ======
    const adminModal = $('adminModal');
    const LS_TOKEN_KEY = 'vv_admin_token';

    function openAdmin(){ adminModal.classList.add('show'); adminModal.setAttribute('aria-hidden','false'); }
    function closeAdmin(){ adminModal.classList.remove('show'); adminModal.setAttribute('aria-hidden','true'); }

    function getAdminToken(){ return (localStorage.getItem(LS_TOKEN_KEY)||'').trim(); }
    function setAdminToken(v){ localStorage.setItem(LS_TOKEN_KEY, (v||'').trim()); }

    function adminHeaders(){
      const t = getAdminToken();
      return t ? { 'x-admin-secret': t } : {};
    }

    function setAdminUi(ok){
      $('adminStatus').textContent = ok ? 'üîì token ok (salvo)' : 'üîí n√£o conectado';
      $('adminStatus').style.opacity = ok ? 1 : .7;
    }

    async function adminApi(path, opts={}){
      const headers = Object.assign({ 'Content-Type':'application/json' }, adminHeaders(), (opts.headers||{}));
      const res = await fetch(API_BASE + path, Object.assign({}, opts, { headers }));
      const data = await res.json().catch(()=> ({}));
      if(!res.ok || data.ok===false){
        const msg = (data && (data.error||data.detail)) ? (data.error||data.detail) : ('HTTP '+res.status);
        throw new Error(msg);
      }
      return data;
    }

    let adminCurrent = null;

    $('btnAdmin').addEventListener('click', ()=>{
      $('adminToken').value = getAdminToken();
      setAdminUi(Boolean(getAdminToken()));
      $('adminOut').textContent = 'Cole um Order ID e toque em ‚ÄúBuscar pedido‚Äù.';
      $('adminPaid').disabled = true;
      $('adminDelivered').disabled = true;
      adminCurrent = null;
      openAdmin();
    });

    $('adminClose').addEventListener('click', closeAdmin);
    adminModal.addEventListener('click', (e)=>{ if(e.target===adminModal) closeAdmin(); });

    $('adminSave').addEventListener('click', ()=>{
      setAdminToken($('adminToken').value);
      setAdminUi(Boolean(getAdminToken()));
      toast('Token salvo ‚úÖ');
    });

    $('adminClear').addEventListener('click', ()=>{
      setAdminToken('');
      $('adminToken').value='';
      setAdminUi(false);
      $('adminOut').textContent='Token limpo.';
      $('adminPaid').disabled = true;
      $('adminDelivered').disabled = true;
      adminCurrent = null;
    });

    $('adminFetch').addEventListener('click', async ()=>{
      const orderId = ($('adminOrderId').value||'').trim();
      if(!orderId){ $('adminOut').textContent='Cola o Order ID (vv_...).'; return; }
      try{
        $('adminOut').textContent='Buscando‚Ä¶';
        const data = await adminApi('/admin/order?orderId=' + encodeURIComponent(orderId), { method:'GET' });
        adminCurrent = data.order || null;
        $('adminOut').textContent = JSON.stringify(adminCurrent, null, 2);
        $('adminPaid').disabled = !adminCurrent;
        $('adminDelivered').disabled = !adminCurrent;
        toast('Pedido carregado ‚úÖ');
      }catch(err){
        $('adminOut').textContent = 'Erro: ' + String(err && err.message ? err.message : err);
        $('adminPaid').disabled = true;
        $('adminDelivered').disabled = true;
        adminCurrent = null;
      }
    });

    $('adminPaid').addEventListener('click', async ()=>{
      const orderId = ($('adminOrderId').value||'').trim();
      if(!orderId) return;
      try{
        $('adminOut').textContent='Marcando como pago‚Ä¶';
        const data = await adminApi('/admin/mark-paid', { method:'POST', body: JSON.stringify({ orderId }) });
        adminCurrent = data.order || null;
        $('adminOut').textContent = JSON.stringify(adminCurrent, null, 2);
        toast('Marcado como PAGO ‚úÖ');
      }catch(err){
        $('adminOut').textContent = 'Erro: ' + String(err && err.message ? err.message : err);
      }
    });

    $('adminDelivered').addEventListener('click', async ()=>{
      const orderId = ($('adminOrderId').value||'').trim();
      if(!orderId) return;
      try{
        $('adminOut').textContent='Marcando como entregue‚Ä¶';
        const data = await adminApi('/admin/mark-delivered', { method:'POST', body: JSON.stringify({ orderId }) });
        adminCurrent = data.order || null;
        $('adminOut').textContent = JSON.stringify(adminCurrent, null, 2);
        toast('Marcado como ENTREGUE üì¶');
      }catch(err){
        $('adminOut').textContent = 'Erro: ' + String(err && err.message ? err.message : err);
      }
    });

    // ====== Scroll buttons ======
    $('btnScroll').addEventListener('click', ()=>document.getElementById('produtos').scrollIntoView({behavior:'smooth'}));
    $('btnHow').addEventListener('click', ()=>document.getElementById('como').scrollIntoView({behavior:'smooth'}));
    $('btnStickyBuy').addEventListener('click', ()=>{
      if(PRODUCTS[0]) openCheckout(PRODUCTS[0]);
      else document.getElementById('produtos').scrollIntoView({behavior:'smooth'});
    });

    // ====== Support AI (local + filtro) ======
    const chat = $('chat');
    const chatBody = $('chatBody');

    function addMsg(text, who='ai'){
      const d = document.createElement('div');
      d.className = 'm ' + (who==='me'?'me':'ai');
      d.textContent = text;
      chatBody.appendChild(d);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function isNonsense(q){
      const t = q.toLowerCase();
      const bad = [
        'porn','sexo','nude','nudes','pelado','pelada','xvideos','hentai','put','bucet','pinto','rola','piroca','caralho',
        'maconha','coca','crack','metanf','droga','arma','pistola','glock','matar','suicid'
      ];
      return bad.some(w=>t.includes(w));
    }

    function answer(q){
      const t = q.toLowerCase();
      if(isNonsense(q)){
        return 'Consigo ajudar com: produtos, PIX, verifica√ß√£o e status do pedido. Bora focar nisso üòâ';
      }
      if(t.includes('pix')){
        return 'PIX: clique em Comprar ‚Üí Gere pedido + PIX ‚Üí copie e cole no app do banco. Se o PIX n√£o aparecer, √© no Worker: vari√°vel PIX_COPIA_COLA.';
      }
      if(t.includes('verific') || t.includes('id') || t.includes('order')){
        return 'Pra verificar: cole seu Order ID (vv_...) na √°rea ‚ÄúVerificar pedido‚Äù e toque em Verificar. Ele mostra o status (criado/pago/entregue).';
      }
      if(t.includes('prazo') || t.includes('entrega') || t.includes('24')){
        return 'Entrega normalmente em at√© 24h. Se precisar agilizar, manda o comprovante + seu user do Roblox no WhatsApp.';
      }
      if(t.includes('reembolso')){
        return 'Se passar do prazo combinado, voc√™ pode pedir reembolso. O ideal √© falar no WhatsApp com o Order ID e o comprovante.';
      }
      if(t.includes('produto') || t.includes('qual') || t.includes('diferen')){
        return 'Os produtos ficam listados na home com pre√ßo. Se voc√™ me disser qual item (Basic/Plus/Custom), eu explico a diferen√ßa rapidinho.';
      }
      return 'Posso ajudar com: como comprar, PIX, status do pedido, verifica√ß√£o e prazos. O que voc√™ quer saber?';
    }

    $('fab').addEventListener('click', ()=>{
      chat.classList.toggle('show');
      document.body.classList.toggle('chatOpen', chat.classList.contains('show'));
      updateBottomOffset();
      if(chat.classList.contains('show') && chatBody.childElementCount===0){
        addMsg('Oi! Sou o Suporte IA da ViralVault. Quer ajuda com PIX, pedido ou verifica√ß√£o?');
      }
    });
    $('closeChat').addEventListener('click', ()=>{ chat.classList.remove('show'); document.body.classList.remove('chatOpen'); updateBottomOffset(); });

    async function sendChat(){
      const q = ($('chatIn').value||'').trim();
      if(!q) return;
      $('chatIn').value='';
      addMsg(q,'me');
      // resposta local (r√°pida)
      addMsg(answer(q),'ai');

      // atalho WhatsApp se usu√°rio pedir
      if(q.toLowerCase().includes('whatsapp') || q.toLowerCase().includes('suporte')){
        const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent('Oi! Preciso de suporte. Meu Order ID √©: ')}`;
        addMsg('Se quiser, toque aqui pra abrir o WhatsApp: '+url,'ai');
      }
    }

    $('chatSend').addEventListener('click', sendChat);
    $('chatIn').addEventListener('keydown', (e)=>{ if(e.key==='Enter') sendChat(); });


    // ====== Layout: evita bot√µes grudados ======
    function updateBottomOffset(){
      const bb = document.querySelector('.bottomBar');
      const h = (bb && bb.offsetHeight) ? bb.offsetHeight : 0;
      document.documentElement.style.setProperty('--bb', h + 'px');
    }
    window.addEventListener('resize', updateBottomOffset);
    updateBottomOffset();

    // ====== Init ======
    $('year').textContent = new Date().getFullYear();

    (async ()=>{
      // Ping home
      try{
        const home = await api('/');
        if(home && home.ok){
          $('apiTxt').textContent = 'API ok';
          $('liveTxt').textContent = 'Ao vivo';
          $('liveDot').style.background = 'var(--green)';
          const oa = home.origin_allowed || '‚Äî';
          $('subtitle').textContent = `loja digital ‚Ä¢ PIX ‚Ä¢ origem: ${oa.replace('https://','')}`;
        }else{
          $('apiTxt').textContent = 'API com erro';
          $('liveTxt').textContent = 'Inst√°vel';
          $('liveDot').style.background = 'var(--yellow)';
        }
      }catch{
        $('apiTxt').textContent = 'API offline';
        $('liveTxt').textContent = 'Offline';
        $('liveDot').style.background = 'var(--yellow)';
      }

      // Load catalog
      try{
        const cat = await api('/catalog');
        if(cat && cat.ok && Array.isArray(cat.products)){
          PRODUCTS = cat.products;
        }
      }catch{}

      if(!PRODUCTS.length){
        PRODUCTS = [
          { id:'brainrot_basic', name:'Brainrot Pack (B√°sico)', price:9.9, description:'Entrega 100% digital ‚Ä¢ em at√© 24h' },
          { id:'brainrot_pro', name:'Brainrot Pack (Plus)', price:19.9, description:'Itens premium ‚Ä¢ entrega em at√© 24h' },
          { id:'custom_roblox', name:'Entrega Personalizada (Roblox)', price:29.9, description:'Voc√™ escolhe o que precisa ‚Ä¢ 24h' },
        ];
      }

      renderProducts();
    })();
  </script>

  <!-- ===== Admin Panel (token no site) ===== -->
  <div class="modal" id="adminModal" aria-hidden="true">
    <div class="sheet" role="dialog" aria-modal="true" aria-label="Painel Admin">
      <div class="sheetHead">
        <div>
          <div class="sheetTitle">üõ°Ô∏è Painel Admin</div>
          <div class="sheetSub">Acesso por token ‚Ä¢ marca pedido como <b>pago</b> / <b>entregue</b></div>
        </div>
        <button class="iconBtn" id="adminClose" type="button" aria-label="Fechar">‚úï</button>
      </div>

      <div class="sheetBody" style="gap:12px">
        <div class="field">
          <label class="lbl">Token Admin (x-admin-secret)</label>
          <input class="inp" id="adminToken" placeholder="cole seu VV_ADMIN_SECRET aqui" autocomplete="off" />
          <div class="hint">Fica salvo s√≥ no seu navegador (localStorage). N√£o aparece pros clientes.</div>
        </div>

        <div class="row" style="gap:10px; flex-wrap:wrap">
          <button class="btn btnGhost" id="adminSave" type="button">Salvar token</button>
          <button class="btn btnGhost" id="adminClear" type="button">Limpar</button>
          <span class="pill" id="adminStatus">üîí n√£o conectado</span>
        </div>

        <div class="field">
          <label class="lbl">Order ID</label>
          <input class="inp" id="adminOrderId" placeholder="vv_..." />
          <div class="hint">Dica: pe√ßa pro cliente te mandar o Order ID + comprovante.</div>
        </div>

        <div class="row" style="gap:10px; flex-wrap:wrap">
          <button class="btn btnPrimary" id="adminFetch" type="button">Buscar pedido</button>
          <button class="btn" id="adminPaid" type="button" disabled>‚úÖ Marcar pago</button>
          <button class="btn" id="adminDelivered" type="button" disabled>üì¶ Marcar entregue</button>
        </div>

        <pre class="code" id="adminOut" style="min-height:120px">Cole um Order ID e toque em ‚ÄúBuscar pedido‚Äù.</pre>
      </div>
    </div>
  </div>

</body>
</html>
